
--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 63
Content-Type: application/octet-stream
X-File-MD5: a2d913ed76975c203ea97d0c623fb462
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/multirepo/lerna.json

{
  "packages": [
    "packages/*"
  ],
  "version": "0.0.0"
}

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 0
Content-Type: application/octet-stream
X-File-MD5: d41d8cd98f00b204e9800998ecf8427e
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/other_path/root.js


--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 858
Content-Type: application/octet-stream
X-File-MD5: 2f1e59b3e11027b5ac9db2855a1ffc40
X-File-Mtime: 1691012380
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/nested_symlinks/mylib/async.js

var a = require.resolve('buffer/').replace(process.cwd(), '$CWD');
var b;
var c;

var test = function test() {
    console.log(a, ': require.resolve, preserveSymlinks ' + (process.execArgv.indexOf('preserve-symlinks') > -1 ? 'true' : 'false'));
    console.log(b, ': preserveSymlinks true');
    console.log(c, ': preserveSymlinks false');

    if (a !== b && a !== c) {
        throw 'async: no match';
    }
    console.log('async: success! a matched either b or c\n');
};

require('resolve')('buffer/', { preserveSymlinks: true }, function (err, result) {
    if (err) { throw err; }
    b = result.replace(process.cwd(), '$CWD');
    if (b && c) { test(); }
});
require('resolve')('buffer/', { preserveSymlinks: false }, function (err, result) {
    if (err) { throw err; }
    c = result.replace(process.cwd(), '$CWD');
    if (b && c) { test(); }
});


--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 606
Content-Type: application/octet-stream
X-File-MD5: 4c05bb8c706430ef6b423d6dd01a5797
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/nested_symlinks/mylib/sync.js

var a = require.resolve('buffer/').replace(process.cwd(), '$CWD');
var b = require('resolve').sync('buffer/', { preserveSymlinks: true }).replace(process.cwd(), '$CWD');
var c = require('resolve').sync('buffer/', { preserveSymlinks: false }).replace(process.cwd(), '$CWD');

console.log(a, ': require.resolve, preserveSymlinks ' + (process.execArgv.indexOf('preserve-symlinks') > -1 ? 'true' : 'false'));
console.log(b, ': preserveSymlinks true');
console.log(c, ': preserveSymlinks false');

if (a !== b && a !== c) {
    throw 'sync: no match';
}
console.log('sync: success! a matched either b or c\n');

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 2
Content-Type: application/octet-stream
X-File-MD5: d9bed3b7e151f11b8fdadf75f1db96d9
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/malformed_package_json/package.json

{

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 42
Content-Type: application/octet-stream
X-File-MD5: c957144f31f2bda33e82b3d31c6a4bda
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/false_main/package.json

{
	"name": "false_main",
	"main": false
}

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 259
Content-Type: application/octet-stream
X-File-MD5: d67bf0331e8ca5350eef9b8bc85cde08
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/nested_symlinks/mylib/package.json

{
  "name": "mylib",
  "version": "0.0.0",
  "description": "",
  "private": true,
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "buffer": "*"
  }
}

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 0
Content-Type: application/octet-stream
X-File-MD5: d41d8cd98f00b204e9800998ecf8427e
X-File-Mtime: 1691012380
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/symlinked/_/symlink_target/.gitkeep


--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 0
Content-Type: application/octet-stream
X-File-MD5: d41d8cd98f00b204e9800998ecf8427e
X-File-Mtime: 1691012380
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/symlinked/_/node_modules/foo.js


--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 1319
Content-Type: application/octet-stream
X-File-MD5: 4daeb9776a4995aa9a64eeba1275ca8a
X-File-Mtime: 1691012380
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/multirepo/packages/package-a/index.js

'use strict';

var assert = require('assert');
var path = require('path');
var resolve = require('resolve');

var basedir = __dirname + '/node_modules/@my-scope/package-b';

var expected = path.join(__dirname, '../../node_modules/jquery/dist/jquery.js');

/*
 * preserveSymlinks === false
 * will search NPM package from
 * - packages/package-b/node_modules
 * - packages/node_modules
 * - node_modules
 */
assert.equal(resolve.sync('jquery', { basedir: basedir, preserveSymlinks: false }), expected);
assert.equal(resolve.sync('../../node_modules/jquery', { basedir: basedir, preserveSymlinks: false }), expected);

/*
 * preserveSymlinks === true
 * will search NPM package from
 * - packages/package-a/node_modules/@my-scope/packages/package-b/node_modules
 * - packages/package-a/node_modules/@my-scope/packages/node_modules
 * - packages/package-a/node_modules/@my-scope/node_modules
 * - packages/package-a/node_modules/node_modules
 * - packages/package-a/node_modules
 * - packages/node_modules
 * - node_modules
 */
assert.equal(resolve.sync('jquery', { basedir: basedir, preserveSymlinks: true }), expected);
assert.equal(resolve.sync('../../../../../node_modules/jquery', { basedir: basedir, preserveSymlinks: true }), expected);

console.log(' * all monorepo paths successfully resolved through symlinks');

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 281
Content-Type: application/octet-stream
X-File-MD5: ce6c7a1786d468fe499a0bbbc654c858
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/multirepo/packages/package-b/package.json

{
  "name": "@my-scope/package-b",
  "private": true,
  "version": "0.0.0",
  "description": "",
  "license": "MIT",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: run tests from root\" && exit 1"
  },
  "dependencies": {
    "@my-scope/package-a": "^0.0.0"
  }
}

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 0
Content-Type: application/octet-stream
X-File-MD5: d41d8cd98f00b204e9800998ecf8427e
X-File-Mtime: 1691012380
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/mug.coffee


--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 0
Content-Type: application/octet-stream
X-File-MD5: d41d8cd98f00b204e9800998ecf8427e
X-File-Mtime: 1691012381
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/mug.js


--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 21
Content-Type: application/octet-stream
X-File-MD5: d00072229e607e3109a7c7b617d829f8
X-File-Mtime: 1691012380
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/same_names/foo.js

module.exports = 42;

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 24
Content-Type: application/octet-stream
X-File-MD5: 4e957bc0e855379d8c9d7dc61d94dd5b
X-File-Mtime: 1691012380
X-File-Path: /project-polref/Encyclopedia/website_polar/node_modules/resolve/test/resolver/symlinked/package/bar.js

module.exports = 'bar';

--boundary_.oOo._KLxrgBiHF+BHznm/ifcy6HrhbxHPW2+y
Content-Length: 0
Content-Type: application/octet-stream
X-File-MD5: d41